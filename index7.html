<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>A Special Letter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&family=Comic+Neue&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Indie Flower', cursive;
    }

    .ri-mail-line {
      font-size: 40px;
      color: #FF00B9;
    }

    canvas {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 0;
    }

    .hidden {
      display: none;
    }

    .fade-in {
      animation: fadeIn 1s forwards;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: scale(0.9);
      }

      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    /* Neon Glow Effect */
    .neon-glow {
      position: absolute;
      inset: -20px;
      border-radius: 9999px;
      background: radial-gradient(circle at center, rgba(255, 0, 200, 0.6), transparent 70%);
      filter: blur(40px);
      z-index: -1;
      animation: pulseGlow 3s ease-in-out infinite;
    }

    @keyframes pulseGlow {
      0%, 100% {
        opacity: 0.5;
        transform: scale(1);
      }
      50% {
        opacity: 0.9;
        transform: scale(1.15);
      }
    }
  </style>
</head>

<body
  class="bg-gradient-to-tr from-black via-[#1a0a2a] to-black min-h-screen flex items-center justify-center p-4 relative overflow-hidden">
  <!-- Canvas for hearts (rain + fireworks) -->
  <canvas id="heartCanvas"></canvas>

  <!-- Envelope (initial view) -->
  <div id="envelope" class="text-center max-w-xs w-full cursor-pointer relative z-10">
    <h1 class="text-[#d47fff] text-5xl sm:text-6xl font-[cursive] font-semibold mb-1" style="letter-spacing: 0.04em;">
      A <span class="text-[#b56bde]">Special</span> Letter
    </h1>
    <p class="text-[#d9b9f7] text-lg sm:text-xl mb- font-[cursive] italic" style="letter-spacing: 0.03em;">
      Just for you , on your special day ðŸ’Œ
    </p>

    <div class="rounded-3xl overflow-hidden w-full max-w-xs mx-auto shadow-lg"
      style="background-color: #fef6ff;height:180px;width:250px;">
      <div class="bg-pink-300 px-4 py-2 flex justify-end rounded-t-3xl"
        style="box-shadow: inset 0 -2px 3px rgb(0 0 0 / 0.1);">
        <span class="text-red-600 text-2xl">ðŸ’–</span>
      </div>
      <div class="flex flex-col items-center justify-center py-10 relative" style="min-height: 150px;height:100px;">
        <i class="ri-mail-line"></i>
        <p class="text-pink-600 text-xl font-[cursive] italic" style="letter-spacing: 0.05em;">
          Click to open
        </p>
      </div>
    </div>
  </div>

  <!-- Message Box (hidden initially) -->
  <div id="messageBox"
    class="hidden relative w-full max-w-sm aspect-square rounded-3xl bg-gradient-to-br from-pink-50 to-white p-6 shadow-lg text-center z-10">
    <div class="neon-glow"> </div>
    <div class="text-gray-700 text-lg leading-relaxed pt-10 px-2">
      <p><b>My Dearest Madam Jii! ðŸ˜˜</b> </p>
      <p class="mt-6">
        On this very special day, I want you to know how truly grateful I am for your presence in my life,
        how much joy you bring to those around you, and how deeply you are cherished today and always.
        Wishing you a birthday as wonderful as your heart. ðŸŽ‚âœ¨
        <span class="inline-block w-1 h-6 bg-pink-200 animate-pulse align-middle"></span>
      </p>
    </div>
  </div>

  <script>
    const envelope = document.getElementById("envelope");
    const messageBox = document.getElementById("messageBox");
    const canvas = document.getElementById("heartCanvas");
    const ctx = canvas.getContext("2d");
    let hearts = [];
    let raining = true;
    let continuousBurst = false;

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    class Heart {
      constructor(x, y, isRain = false) {
        this.x = x;
        this.y = y;
        this.size = isRain ? Math.random() * 6 + 4 : Math.random() * 18 + 8;
        this.speedX = isRain ? (Math.random() - 0.5) * 1 : (Math.random() - 0.5) * 6;
        this.speedY = isRain ? Math.random() * 1 + 0.5 : Math.random() * -4 - 2;
        this.alpha = 1;
        this.gravity = isRain ? 0 : 0.1;
        this.isRain = isRain;
      }
      draw() {
        ctx.save();
        ctx.translate(this.x, this.y);
        ctx.scale(this.size / 20, this.size / 20);
        ctx.fillStyle = `rgba(255,0,200,${this.alpha})`;
        ctx.shadowColor = "rgba(255,0,200,0.8)";
        ctx.shadowBlur = 8;
        ctx.beginPath();
        ctx.moveTo(0, -5);
        ctx.bezierCurveTo(5, -15, 20, -15, 20, 0);
        ctx.bezierCurveTo(20, 15, 0, 25, 0, 35);
        ctx.bezierCurveTo(0, 25, -20, 15, -20, 0);
        ctx.bezierCurveTo(-20, -15, -5, -15, 0, -5);
        ctx.fill();
        ctx.restore();
      }
      update() {
        this.x += this.speedX;
        this.y += this.speedY;
        if (!this.isRain) this.speedY += this.gravity;
        this.alpha -= this.isRain ? 0.003 : 0.015;
      }
    }

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      hearts.forEach((heart, index) => {
        heart.update();
        heart.draw();
        if (heart.alpha <= 0) hearts.splice(index, 1);
      });
      if (raining && Math.random() < 0.2) { // few hearts only
        hearts.push(new Heart(Math.random() * canvas.width, -10, true));
      }
      requestAnimationFrame(animate);
    }
    animate();

    function burstHearts(x, y, count = 30) {
      for (let i = 0; i < count; i++) {
        hearts.push(new Heart(x, y));
      }
    }

    envelope.addEventListener("click", () => {
      envelope.classList.add("hidden");
      messageBox.classList.remove("hidden");
      messageBox.classList.add("fade-in");

      raining = false; // stop raining

      // First big burst
      const rect = messageBox.getBoundingClientRect();
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;
      burstHearts(centerX, centerY, 40);

      // Enable continuous small bursts
      continuousBurst = true;
      setInterval(() => {
        if (continuousBurst) {
          const rect = messageBox.getBoundingClientRect();
          const randX = rect.left + Math.random() * rect.width;
          const randY = rect.top + Math.random() * rect.height;
          burstHearts(randX, randY, 6);
        }
      }, 1000);
    });
  </script>
</body>

  </html>
